[{"title":"💎","tags":["About"],"href":"_index","content":" httpsvisionarytop httpswwwnpmjscomvisionarym httpsgithubcomviisionary httpscodesandboxio"},{"title":"免费部署个人站点","tags":["DevOps"],"href":"blog/DevOps/FREE SaaS","content":" HerokuNodejs GitHub domain 550h httpsspiderapivisionaryherokuappcom git GitHubio Vercel httpsvercelcom Codesanbox localhost MongoDB Redis 30M 100M 6 shell rediscli h redis15506c284useast12gcecloudredislabscom p 15506 a Rw5zQwFbhevBZCjRvr27G24hUt0r8vbk yarn global add serve serve s build Redis Render"},{"title":"dockerDeploy","tags":["docker","devOps"],"href":"blog/DevOps/dockerDeploy","content":"docker httpsdocsdockercomregistrydeploying shell docker run d p 50005000 restartalways name registry registry2 http daemonjson httpsdocsdockercomregistryinsecure daemon shell vim etcdockerdaemonjson json insecureregistries localhost5000 insecureregistries 00000 docker shell sudo dockerd "},{"title":"dockerfile & docker-compse","tags":["docker"],"href":"blog/DevOps/dockerfile详解","content":"Dockerfile reference httpsdocsdockercomenginereferencebuilder dockerfile RUN CMD ENTRYPOINT shell CMD docker run RUN docker build ENTRYPOINT CMD docker run ENTRYPOINT Dockerfile ENTRYPOINT FROM nginx COPY ADD yaml chown COPY chown ADD COPY ENV ARG ENV ARG Dockerfile docker build VOLUME EXPOSE docker run P EXPOSE WORKDIR WORKDIR WORKDIR docker build RUN WORKDIR eg yaml WORKDIR app USER HEALTHCHECK docker ONBUILD FROM shell docker build t projectnamev3 Docker Compose Compose Docker Compose YML YML dockercomposeyml "},{"title":"docker部署前端完整服务","tags":["docker"],"href":"blog/DevOps/docker部署前端完整服务","content":"copy Nginx ENV envsubst run Nginx config yaml 1 FROM node16alpine AS deps Check httpsgithubcomnodejsdockernodetreeb4117f9333da4138b03a546ec926ef50a31506c3nodealpine to understand why libc6compat might be needed RUN apk add nocache libc6compat WORKDIR app COPY packagejson yarnlock RUN yarn config set registry httpsregistrynpmtaobaoorg RUN yarn install frozenlockfile 2 FROM node16alpine AS builder WORKDIR app COPY fromdeps appnodemodules nodemodules COPY RUN yarn build 2 Nginx FROM nginxlatest AS runner WORKDIR app COPY frombuilder appbuild middleplatformportal Nginx RUN mkdir p etcnginxsitesenabled RUN mkdir p etcnginxtemplates COPY confdnginxconf etcnginxnginxconf COPY confdwebsiteconf etcnginxtemplates ENTRYPOINT envsubst BACKEND etcnginxsitesenabledmeeting125339comcnconf nginx g daemon off COPY confdgeneralconf etcnginxnginxconfigio COPY confdsecurityconf etcnginxnginxconfigio EXPOSE 8080 ENV PORT 8080 "},{"title":"k8s","tags":["k8s"],"href":"blog/DevOps/k8s","content":"k8smd Minikube Katacoda Kubernetes minikube MinikubeKubernetesKubernetesk8sPCKubernetesmacOSLinuxWindows shell brew install minikube sudo chown R USER HOMEminikube chmod R uwrx HOMEminikube minikube start minikube dashboard minikube dashboard url "},{"title":"一些常用的Linux上的包","tags":["DevOps"],"href":"blog/DevOps/linux_package","content":" Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery Linux shell sudo yum install yumutils shell sudo yum install git "},{"title":"linux 系统属性","tags":["DevOps","linux"],"href":"blog/DevOps/linux属性","content":"Linux linux free powershell free The top line reports on system memory the bottom line reports on swap space Well introduce the columns here then look at them in more detail shortly The columns for the memory line are as follows Total The total amount of physical RAM installed in your computer Used This is calculated by TotalFreeBuffersCache Free The amount of unused memory Why doesnt TotalUsedFree Well explain that shortly Shared Memory that is used by the tmpfs file system Buffcache Memory used for buffers and cache Available This is an estimation of the memory that is available to service memory requests from applications any other functioning software within your computer such as your graphical desktop environmenthttpsenwikipediaorgwikiDesktopenvironment and Linux commands Linux shell rooteb63132 cat etcredhatrelease Red Hat Enterprise Linux release 84 Ootpa shell tar zcvf wwwtargz tar zcvf wwwtargz shell Cpus 350 us 251 sy 00 ni 397 id 01 wa 00 hi 01 si 00 st KiB Mem 13173243total 52521144 free 33416016 used 45795268 buffcache shell cat proccpuinfo grep model name uniq model name IntelR XeonR CPU E52660 v3 260GHz "},{"title":"nginx 配置文件 & context & 属性","tags":["nginx"],"href":"blog/DevOps/nginx","content":" docker Nginx Nginx Cache NGINX httpswwwdigitaloceancomcommunitytoolsnginxdomains0phpphpfalsedomains0routingindexindexhtmldomains0routingfallbackHtmltrueglobalapplangzhCN docker Nginx dockerfile dockerfile FROM nginx COPY statichtmldirectory www COPY nginxconf etcnginxnginxconf shell docker run name nginxserver1 d p 99999999 nginxserver ps run start rm shell docker run Run a command in a new container docker start Start one or more stopped containers docker rm nginxserver shell docker exec it nginxserver binbash exit Nginx context events http http server location nested location upstream mail server location shell location matchhere proxypass httpexamplecom header shell proxysetheader HOST host proxysetheader XForwardedProto scheme proxysetheader XRealIP remoteaddr proxysetheader XForwardedFor proxyaddxforwardedfor location matchhere proxypass httpexamplecomnewprefix location differentmatch proxypass httpexamplecom location context shell limitexcept GET HEAD limitexcept context allow 1921681124 deny all if testcondition if context shell upstream backendhosts leastconn hash remoteaddrremoteport consistent server host1examplecom weight3 server host2examplecom server host3examplecom server listen 80 servername examplecom location proxyme proxypass httpbackendhosts proxy buffer proxy buffer proxycache CacheControl 1 nocache 2 nostore 3 public HTTP private 4 private private 5 maxageExpires31536000 6 smaxagemaxage 7 mustrevalidate maxagesmaxageExpires 8 proxyrevalidate 9 notransform shell location private expires 1 addheader CacheControl nostore "},{"title":"srs使用笔记","tags":["srs使用笔记"],"href":"blog/DevOps/srs使用笔记","content":"srsmd Google iCloud shell CANDIDATE192168110 docker run rm it p 19351935 p 19851985 p 80808080 env CANDIDATECANDIDATE p 80008000udp registrycnhangzhoualiyuncscomossrssrs4 objssrs c confdockerconf httpsossrsnetwikiimagessrsarch41png"},null,{"title":"Curry Function - 柯里化函数","href":"blog/algorithms/Curry_Function","content":"Currying is a process in functional programming in which we can transform a function with multiple arguments into a sequence of nesting functions It returns a new function that expects the next argument inline js function multiplya return b return c return a b c logmultiply123 6 fa b c fabc js function curryfn args return arg return fnargs arg example js function discountdiscount return price return price discount const tenPercentDiscount discount01 tenPercentDiscount500 50 500 50 450 const twentyPercentDiscount discount02 twentyPercentDiscount500 100 500 100 400 "},{"title":"双向链表","href":"blog/algorithms/DoublyLinkedList","content":"javascript export default class DoublyLinkedListNode constructorvalue next null previous null thisvalue value thisnext next thisprevious previous toStringcallback return callback callbackthisvalue thisvalue "},null,null,{"title":"Dijkstra Algorithm","href":"blog/algorithms/graph/DijkstraAlgorithm","content":"finding the shortest paths to all graph vertices from single vertex "},{"title":"Dijkstra Algorithm","href":"blog/algorithms/graph/Prim’sAlgorithm","content":"finding Minimum Spanning Tree MST for weighted undirected graph MST"},{"title":"链表","href":"blog/algorithms/linkedList","content":"js javascript export default class LinkedListNode constructorvalue next null thisvalue value thisnext next toStringcallback return callback callbackthisvalue thisvalue "},null,null,null,null,null,null,{"title":"站点信息","tags":["devOps"],"href":"blog/blog info/myWebSite","content":"aws v hero github page github codepen codeSanboxnode react httpsspiderapivisionarytop httpsspidervisionarytop httpsblogvisionarytop blognotes GitHub codeSanboxcodepen "},{"title":"一个fn选取文件","tags":["一个fn选取文件"],"href":"blog/blog info/一个fn选取文件","content":"fn promise js let fileInputEle any const fileInputHandlerDefer any export const pickFile limitTypes any multiple any if fileInputEle fileInputEle documentcreateElementinput fileInputElesetAttributetype file fileInputElestyledisplay none fileInputEleaddEventListenerchange if fileInputElefiles fileInputElefileslength if multiple fileInputHandlerDeferresolvefileInputElefiles else fileInputHandlerDeferresolvefileInputElefiles0 else fileInputHandlerDeferreject fileInputEleremoveAttributemultiple fileInputEleremoveAttributeaccept fileInputElevalue if multiple fileInputElesetAttributemultiple multiple if limitTypes limitTypeslength fileInputElesetAttribute accept limitTypesmapone string startsWithone one onejoin return new Promiseresolve reject fileInputHandlerDeferresolve resolve fileInputHandlerDeferreject reject fileInputEleclick "},{"title":"计算文件md5值","tags":["js","browser"],"href":"blog/blog info/计算文件md5值","content":"md5 spiderutils md5 js export const getFileMd5 file any return new Promiseresolve reject const reader new FileReader const stepSize 1024 1024 10 const startPos 0 let blob if filewebkitSlice blob filewebkitSlicestepSize startPos stepSize startPos 1 else if filemozSlice blob filemozSlicestepSize startPos stepSize startPos 1 else if fileslice blob fileslicestepSize startPos stepSize startPos 1 else consoleerror return false readeronload tsignore if readerresult const uuid md5readerresult filename filesize filelastModified resolveuuid blob readerreadAsArrayBufferblob "},{"title":"Fabric.js使用笔记","tags":["js"],"href":"blog/brower/Fabric.js使用笔记","content":"Fabricjs is a powerful and simple Javascript HTML5 canvas library API js "},{"title":"IE11 问题记录","tags":["IE11"],"href":"blog/brower/IE11","content":"IE11md js IE11 JSONparse0123 0123 chrome JSONparse0123 throw ERROR "},{"title":"HTTP缓存控制机制","tags":["cache"],"href":"blog/brower/cache","content":"cachemd HTTP nocache nostore ETag Etag hash http nginxLastModifiedcontentlength EtagLastModifiedLastModified"},{"title":"performance & source的使用","href":"blog/brower/chrome","content":"performance source debug imgpngcontentblogbrowerimgpngblogbrowerimgpng img1pngcontentblogbrowerimg1pnglogbrowerimg1png network img2pngcontentblogbrowerimg2pnglogbrowerimg2png 2 html js img3pngcontentblogbrowerimg3pnglogbrowerimg3png innerHTML call stack"},{"title":"lighthouse","tags":["前端性能"],"href":"blog/brower/performance/Chrome Lighthouse 13fbc0f207184e848d9fb68069955f3e","content":"Performance Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery Performance 6 lighthousewebvitals Chrome20Lighthouse2013fbc0f207184e848d9fb68069955f3eUntitledpngcontentblogbrowerperformanceChrome Lighthouse 13fbc0f207184e848d9fb68069955f3eUntitledpng First Contentful Paint FCP eg loading text image 18s How to improve eg htmlloading Speed Index 34s How to improve Largest Contentful Paint LCP loadDOMContentLoaded first contentful paintloading image text block 25s How to improve 1 cssimagesfontsjs 2 loading 3 PRPL 1 2 3 assets 4 Time to Interactive 38s How to improve JavaScript Total Blocking Time FCPTTI 50ms50ms50msTBT Cumulative Layout Shift CLS 01 How to improve 1 image video 2 3 animations react16fiber tree shaking code splittingjs 1http 2 webpack output gzip http webpack webpackhash webpackbundlehash maxage CACHECONTROL nodemodule"},{"title":"video 标签支持的视频格式类型","tags":["browser"],"href":"blog/brower/video","content":" MP4 WebM and OGG codesandbox Video Formats Codecs and Containers Formats MP4MPEG4 Codecs H264 HLS MPEGDASH Codecs H264AVCH256HEVC VP9VP8 AV1 MP3 AAC AC3 Containers mp4 live stream RTPRTCPRTMPRTSPHLSDASH Simulcast SVC ffmpeg webrtc"},{"title":"ENV script","tags":["js","node"],"href":"blog/devNotes/ENVscript","content":"ENV script env yarn run build env URL VERSION SIDEID COMMITHASH "},{"title":"JotDown","tags":["JotDown"],"href":"blog/devNotes/JotDown","content":" "},{"title":"百度网盘 开放API 上传 & 下载","tags":["工具"],"href":"blog/devNotes/baidu_netdisk","content":" API 4M appid appkey accesstoken js const axios const startCheck async devicecode let num 0 let check setIntervalasync const data accesstoken expiresin await axiosgetoauth20tokengranttypedevicetokencodedevicecodeclientidYutwMOQLwfebbbCYPDsMUrg0LprvRlQwclientsecretzdDEIDy9OdLaI2ymeovh21wEGBnKefDU num if accesstoken num 10 if accesstoken messagesuccess setTokenaccesstoken setQrcodeurl consolelogaccesstoken expiresin 60 min clearIntervalcheck 6000 const getToken async const appid YutwMOQLwfebbbCYPDsMUrg0LprvRlQpp const res await axiosgetoauth20devicecoderesponsetypedevicecodeclientidappidscopebasicnetdisk const qrcodeurl verificationurl devicecode usercode resdata verificationurl usercode setQrcodeurlqrcodeurl startCheckdevicecode 1 2 3 4 js const token accesstoken const upload async file httppanbaiducom const token 1266f9b3155cebb94f2f47c29f426d5d857YlqeTKGIexdcBBTTtYMRs1jMh5O466uSrSo1yYjF1sZw const url apirest20xpanfileaccesstokentokenmethodprecreate const size filesize const filename filename const path appsfileserverfilename const md5 hello const request new Requesturl method POST body pathpathsizesizeisdir0autoinit1rtype3blocklistmd5contentmd5md5 fetchrequestthenresponse if responsestatus 200 return responsejson else throw new ErrorSomething went wrong on API server thenresponse const uploadid responseuploadid var myHeaders new Headers myHeadersappendContentType multipartformdata const formData new FormData formDataappendfile file const urlupload filerest20pcssuperfile2methoduploadaccesstokentokenpathpathtypetmpfileuploadiduploadidpartseq0 const request2 new Requesturlupload method POST body formData fetchrequest2thenresponse if responsestatus 200 return responsejson else throw new ErrorSomething went wrong on API server thenres2 consolelogres2 const url3 apirest20xpanfileaccesstokentokenmethodcreate const req3 new Requesturl3 method POST body pathpathsizesizeisdir0autoinit1rtype3blocklistres2md5contentmd5md5 fetchreq3thenresponse if responsestatus 200 return responsejson else throw new ErrorSomething went wrong on API server thenres3 const req4 new Requestapirest20xpanmultimediamethodfilemetasaccesstokentokenfsidsres3fsiddlink1 method GET fetchreq4thenresponse if responsestatus 200 return responsejson else throw new ErrorSomething went wrong on API server thenres4 res4list0dlink messagesuccess consolelogres3 catcherror consoleerrorerror "},null,{"title":"WebAssembly & assemblyscript 示例","tags":["WebAssembly"],"href":"blog/explore/wasm","content":" WebAssembly WebAssembly assemblyscript hello word Wasm By Examplehttpswasmbyexampledev assemblyscripthttpsgithubcomAssemblyScriptassemblyscript shell npm install g assemblyscript ts This exports an add function It takes in two 32bit integer values And returns a 32bit integer value export function adda i32 b i32 i32 return a b shell asc helloworldts b helloworldwasm "},{"title":"Grunt的使用及配置","tags":["前端安全"],"href":"blog/framework/Grunt的使用及配置","content":"jsts plugins es6tstsx ES6 Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery Grunt Getting started Grunt The JavaScript Task Runnerhttpsgruntjscomgettingstarted bash npm install g gruntcli bash npm install grunt savedev npm install gruntcontribuglify savedev indexjs Gruntfilejs bash moduleexports functiongrunt Project configuration gruntinitConfig pkg gruntfilereadJSONpackagejson uglify options banner n build src indexjs dest buildminjs Load the plugin that provides the uglify task gruntloadNpmTasksgruntcontribuglify Default tasks gruntregisterTaskdefault uglify grunt dest plugins uglify srcindexjs jsx import text from testModule consolelogtext srctestModulejs jsx exports const text hello Gruntfile jsx moduleexports functiongrunt Project configuration gruntinitConfig pkg gruntfilereadJSONpackagejson uglify options banner n dist files expand true src srcjs dest build ext minjs extDot first rename function e name The value for rename must be a function return e namesubstring4 The function must return a string with the complete destination gruntloadNpmTasksgruntcontribuglify gruntregisterTaskdefault uglify Babel es6 json babelcore 7146 babelpresetenv 7147 gruntbabel 800 1 Babel 2 load 3 jsx mycode 20210715 use strictvar testModulerequiretestModuleconsolelogtestModuletext bebel jsx babel options sourceMap true presets babelpresetenv dist files expand true src srcjs dest build ext js TODO gruntts ts gruntcontribcopy gruntmochatest gruntregisterTask Task ts mocha jsx moduleexports function grunt requireloadgrunttasksgrunt gruntregisterTaskdeleteLib A test task function gruntfiledeletelib gruntinitConfig pkg gruntfilereadJSONpackagejson ts default src srcts nodemodules tsconfig tsconfigjson outDir lib babel options sourceMap true presets babelpresetenv dist files expand true src libjs dest dist ext js mochaTest test options reporter spec captureFile resultstxt Optionally capture the reporter output to a file quiet false Optionally suppress output to standard out defaults to false clearRequireCache false Optionally clear the require cache before running tests defaults to false clearCacheFilter key true Optionally defines which files should keep in cache noFail false Optionally set to not fail on failed tests will still fail on other errors src libtestspecjs uglify options js stripBanners true banner js n files libsrcjs dist files expand true cwd lib src srcjs dest spiderutils ext js extDot first rename function e name The value for rename must be a function return e namesubstring4 The function must return a string with the complete destination copy main files expand true cwd lib dest spiderutils src srcdts rename function e name The value for rename must be a function return e namesubstring4 The function must return a string with the complete destination src spiderutilspackagejson dest spiderutilspackagejson gruntloadNpmTasksgruntmochatest gruntloadNpmTasksgruntcontribuglify gruntloadNpmTasksgruntts gruntloadNpmTasksgruntcontribcopy gruntregisterTaskdefault ts mochaTest uglify copy deleteLib "},{"title":"微前端 - qiankun","tags":["webpack"],"href":"blog/framework/Micro-Frontend-with-qiankun","content":"git MicroFrontends with qiankun qiankunhttpsqiankunumijsorg mainapp react childapp1react childapp2vue more mainapp react jsx import addGlobalUncaughtErrorHandler initGlobalState MicroAppStateActions runAfterFirstMounted start from qiankun import state from configinitGlobalState ReactDOMrender react component header aside bar dom footer start prefetch all runAfterFirstMounted consolelogMainApp first app mounted addGlobalUncaughtErrorHandlerevent consolelogevent state export const globalActions MicroAppStateActions initGlobalStatestate globalActionsonGlobalStateChangestate prev consolelogMainApp state prev if stateloginshow storedispatch type SETUSERLOGIN payload hideLogin false redirectUrl stateloginredirect addTab stateloginaddTab initGlobalStatejs jsx const customHistory createBrowserHistory export const state user id StoragegetItemoperatorId name StoragegetItemuserName phone StoragegetItemmobile role StoragegetItemrole token StoragegetItemtoken oplevel StoragegetItemroleId provinceId StoragegetItemprovinceId all page param pathname param state param hash param search tsignore historyCallback pathname state hash search mainapp const location pathname beforePathname customHistory customHistorypushpathname hash hash search search state jsx export const getMicroApps host string vue name webfirm entry host 8887 container subContainer activeRule firm vue name webmember entry host 8889 container subContainer activeRule member vue name webcontent entry host 8885 container subContainer activeRule content react name webhotLine entry host 8886 container subContainer activeRule hot name videoproduct entry host 8882 container subContainer activeRule videoproduct jsx registerMicroAppsgetMicroApps host beforeLoad beforeLoad beforeMount beforeMount afterMount afterMount beforeUnmount beforeUnmount afterUnmount afterUnmount childapp1 react jsx function renderprops any const container props ReactDOMrender container containerquerySelectorroot documentquerySelectorroot function storeTestprops tsignore propsonGlobalStateChangevalue prev consolelogpropsname props change value prev true export async function bootstrap consolelogwebhotLine react app bootstraped export async function mountprops any consolelogwebhotLine props from main framework props storeTestprops renderprops export async function unmountprops any const container props ReactDOMunmountComponentAtNodecontainer containerquerySelectorroot documentquerySelectorroot if windowPOWEREDBYQIANKUN render childapp2 maints jsx export function renderprops consolelog tsignore const container props consolelogcontainer container instance new Vue router store render h hApp mountcontainer containerquerySelectorapp app export async function mountprops consolelogprops consolelogprops storeTestprops setGlobalState propssetGlobalState renderprops function storeTestprops tsignore propsonGlobalStateChangevalue prev consolelogpropsname props change value prev true if windowPOWEREDBYQIANKUN render export async function unmount instancedestroy instanceelinnerHTML instance null localStorage documentcookie MicroFrontends20with20qiankun20f6f7e51842ef440ebde3ed5eb8e910abUntitledpngMicroFrontends20with20qiankun20f6f7e51842ef440ebde3ed5eb8e910abUntitledpng MicroFrontends20with20qiankun20f6f7e51842ef440ebde3ed5eb8e910abUntitled201pngMicroFrontends20with20qiankun20f6f7e51842ef440ebde3ed5eb8e910abUntitled201png NGINX jsx location rewrite h5 http101621138888videoproducth5 if requestfilename htmlhtm addheader CacheControl nocachenostoremustrevalidate root homeccbopwwwRootccbopfrontendmainapp index indexhtml tryfiles uri uri indexhtml location subapp if requestfilename htmlhtm addheader CacheControl nocachenostoremustrevalidate alias homeccbopwwwRootccbopfrontendsubapp tryfiles uri uri indexhtml h5 location videoproducth5 if requestfilename htmlhtm addheader CacheControl nocachenostoremustrevalidate alias homeccbopwwwRootccbopfrontendvideoproducth5 tryfiles uri uri videoproducth5indexhtml jsx vueconfigjs moduleexports outputDir dist assetsDir firmStatic port 8887 github "},{"title":"babel/register 编译","tags":["前端安全"],"href":"blog/framework/babel-register","content":"Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery babelregister 20217 Babel Babel httpswwwbabeljscndocs bash npm i babelregister npm i babelcore npm i babelpresetenv bash requirebabelregister presets babelpresetenv requiretestjs ts jsx requirebabelregister presets babelpresettypescript babelpresetenv "},{"title":"webpack中常用的 loader & 自定义 loader","tags":["webpack"],"href":"blog/framework/webpack_loader","content":"Loaders javascript javascript svgrwebpack svg shell yarn add svgrwebpack dev js loader test svg use svgrwebpack exclude asPicture styleloadercssloadersassloaderpostcssloader styleloader cssstyle loaderstyleloaderloaderstyle cssloader css cssstyleloadercssloader postcssloader css shell cnpm i styleloader D js moduleexports module rules test css use styleloader babelloader tsloader Es6 Es5 ts js htmlloader htmlDOMhtmlloader js import Content from templatehtml documentbodyinnerHTML Content fileloaderurlloader jpgpngpath eslintloader "},{"title":"webpack_plugin","tags":["webpack"],"href":"blog/framework/webpack_plugin","content":"Plugin ES5 Writing a Plugin DOC httpswebpackjsorgcontributewritingaplugin js var HelloWorldPlugin requirehelloworld moduleexports configuration settings here plugins new HelloWorldPlugin options true How the dependency graph is sorted Answer Topological Sorting httpsdevtojasminhowdependancygraphinwebpackresolvemoduledependency5ej4 webpack lib httpswebpackjsorgguidesauthorlibraries"},{"title":"如何优化你的前端项目","tags":["webpack"],"href":"blog/framework/如何优化你的前端项目","content":" 1webpack webpackbundleanalyzer webpackwebpackwebpackcli shell npm install savedev webpackbundleanalyzer jsx script to enable webpackbundleanalyzer run node analysejs processenvNODEENV production const webpack requirewebpack const BundleAnalyzerPlugin requirewebpackbundleanalyzer const webpackConfigProd requireconfigwebpackconfigproduction new BundleAnalyzerPluginoptions object webpackConfigProdpluginspushnew BundleAnalyzerPlugin actually running compilation and waiting for plugin to start explorer webpackwebpackConfigProd err stats if err statshasErrors consoleerrorerr bash node analysejs contentblogbrowerperformancefrontEndProjectOptimizationimagesUntitledpng stat webpack parsed webpack gzipped GZIPbundle jsx do import isEmpty from lodashisEmpty not do import isEmpty from lodash perfer import parsed gzipped23gzip E5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled201pngE5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled201png E5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled202pngE5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled202png compressionwebpackplugin webpackparsedgzipcompressionwebpackplugin bash npm install dev compressionwebpackplugin webpack jsx plugins isEnvProduction new CompressionPlugin filename pathgzquery algorithm gzip test jststsxcsshtmleotttfwoffsvg threshold 10240 minRatio 08 deleteOriginalAssets true shell npm run build gz E5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled203pngE5A682E4BD95E4BC98E58C96E4BDA0E79A84E5898DE7ABAFE9A1B9E79BAE20a2c55b788c0b48ec9f6715d97967257aUntitled203png gzipnginx shell gzip on gziptypes textplain applicationjavascript applicationxjavascript textcss applicationxml textjavascript applicationxhttpdphp imagejpeg imagegif imagepng gzipproxied any gzipvary on gziphttpversion 11 gzipcomplevel 6 gzipbuffers 16 8k gzip jsresponse header ContentEncoding gzip 2react Split Code Chunks Reactlazy reactloadable jsx const OtherComponent Reactlazy importOtherComponent function MyComponent return Suspense fallbackLoading bundlejs webpackwebpackanalyzercompressionwebpackplugingzipnginxgzipreactjs"},{"title":"新搭一个框架要做的事情","href":"blog/framework/新搭一个框架要做的事情","content":" 1 2 3 4 stylestyle in js 5 indexless 6 7 fontsize 8 color less textprimarycolor ddd textsecondcolor eee divider 1px solid ddd primarycolor blue and more 9 mixin less 10 css 11 tscli 12 jestmocha 13 14 eslintstylelint tsconfig 15 webpack compression webpackanalysis 16 17 cleancodereview 18 httpauth http 19 constant api pathreducer type 20 21 confirmalertemptynoSearchloading 22 23 ci 24 mock 25 26 storage 27 table 28 eslint stylelint 29 30 31 loading 32 form 33 and more"},{"title":"GitHub Fork","tags":["Git"],"href":"blog/github/GitHub_Fork","content":" fork fork repositoryGitHub GitHub Fork Fork a repo DOChttpsdocsgithubcomengetstartedquickstartforkarepo Fork forkGitHub Fork Untitledpngbloggithubimagesforkpng fork clone shell git clone httpsgithubcomYOURUSERNAMESpoonKnife clone shell git remote v origin httpsgithubcomYOURUSERNAMEYOURFORKgit fetch origin httpsgithubcomYOURUSERNAMEYOURFORKgit push shell git remote add upstream httpsgithubcomoctocatSpoonKnifegit shell git remote v origin httpsgithubcomYOURUSERNAMEYOURFORKgit fetch origin httpsgithubcomYOURUSERNAMEYOURFORKgit push upstream httpsgithubcomORIGINALOWNERORIGINALREPOSITORYgit fetch upstream httpsgithubcomORIGINALOWNERORIGINALREPOSITORYgit push "},{"title":"GitHub 子模块","tags":["Git"],"href":"blog/github/GitHub_sub_module","content":"Git Git Git Git gitmodules URL hugo toml submodule themesvisiionary path themesvisiionary url httpsgithubcomvisiionaryshowfoliohugothemegit "},{"title":"Git Hook","tags":["Git"],"href":"blog/github/Git_Hook ","content":"husky precommit preparecommitmsg commitmsg postcommit postcheckout prerebase "},{"title":"Git Action","tags":["Git"],"href":"blog/github/Github_Action","content":"Action github action Git master npm Public to npm workflow 24cd088bpngbloggithubimages24cd088bpng npm accesstoken httpswwwnpmjscomsettingshttpswwwnpmjscomsettings npmpublishaccesstoken repositoriesActions secrets NPMTOKEN yml bloggithubimages2e692847png bloggithubimages8d8ad11bpng npmpublishyml push master ubuntu 1 npm ci 2 build 3 spiderutils 4 yaml name Nodejs Package on push branches master jobs build runson ubuntulatest steps uses actionscheckoutv2 uses actionssetupnodev2 with nodeversion 14 registryurl httpsregistrynpmjsorg run npm ci run npm run build run cd spiderutils npm publish env NODEAUTHTOKEN secretsNPMTOKEN "},{"title":"Git 常用命令","tags":["Git"],"href":"blog/github/git_command","content":" commit shell git commit amend commit push shell git rebase i HEAD5 git rebase interactive parentofflawedcommit git push f pick square git add submodule httpsgithubcomviisionaryleetcode commit hash git describe always tag git describe contains git log h abbreviated commit hash x09 tab character for code 9 an author name ad author date format respects date option s subject git log prettyformatan git log 1 prettyformatan git log shell git log prettyformathx09 an x09 ad x09 s git log prettyformathx09 an x09 tag shell git describe abbrev0 tag 6 hash shell git describe always abbrev6 git log subject shell git log prettyformat s git log 1 prettyformats git rm cached r dist git log 1 prettyformatad dateformatYmd HMS tag git tag d v100 git push origin refstagsv100 Want to find which commit caused a bug git bisect start git bisect bad Current version is bad git bisect good v11 v11 is known to be good git help bisect zsh alias shell gst git status gc git commit gaa git add all gco git checkout gp git push gl git pull gcb git checkout b gm git merge grb git rebase gpsup git push setupstream origin currentbranch gbda git branch nocolor merged command grep vE smasterdevelopdevs command xargs n 1 git branch d gfa git fetch all prune "},{"title":"Javascript - 闭包 Closures","tags":["javascript"],"href":"blog/js/Closures","content":" javascript function person let name Peter return function displayName consolelogname let peter person peter prints Peter javascript function getCounter let counter 0 return function return counter let count getCounter consolelogcount 0 consolelogcount 1 consolelogcount 2 "},{"title":"什么是DOM & BOM？","tags":["js"],"href":"blog/js/DOMBOM","content":" DOM stands for Document Object Model BOM stands for Browser Object Model window document history screen navigator location"},{"title":"JavaScriptDecorators","tags":["JavaScriptDecorators"],"href":"blog/js/JavaScriptDecorators","content":"JavaScript Decorators "},{"title":"NODE方法一览-cheat","tags":["NODE方法一览-cheat"],"href":"blog/js/NODE方法一览-cheat","content":"Nodejs v16140 NODEcheatmd Buffer import Buffer from buffer Child process Cluster Commandline options"},{"title":"React代码层优化","tags":["React代码层优化"],"href":"blog/js/React代码层优化","content":" render memo callback list tree reactwindow style height state immutable immutabilityhelper"},{"title":"WebWorker","tags":["前端性能"],"href":"blog/js/WebWorker","content":" JavaScript CPU Web Worker httpswwwruanyifengcomblog201807webworkerhtml Web Worker JavaScript Worker Web Worker 1 Worker 2DOM Worker DOM documentwindowparentWorker navigatorlocation 3 Worker 4 Worker alertconfirm XMLHttpRequest AJAX 5 Worker file javascript var worker new Workerworkjs workerpostMessageHello World workerpostMessagemethod echo args Work javascript workeronmessage function event consolelogReceived message eventdata doSomething function doSomething workerpostMessageWork done Worker Worker "},{"title":"js中几个遍历数组方法的特点","tags":["js基础"],"href":"blog/js/arrayErgodic","content":" for js forj 0 j arrlength j foreach js for in map for of"},{"title":"es6 新语法 - 2019 & 2020","tags":["js"],"href":"blog/js/es6","content":" 2018 1 trimStarttrimEnd 2 ObjectentriesObjectfromEntries 3 4 flat 5 flatMap javascript string consolelog trimStart trimStarttrimEnd consolelog trimStart obj const Person name Joey age 25 const entries ObjectentriesPerson consolelogentries const restore ObjectfromEntriesentries consolelogrestore array const persons Person Person name peter consolelogflat personsflat personsflatflat consolelog flatMap personsflatMapx return name name is xname 2020 1 2 PromiseallSettled javascript obj consolelogPersonnameinfoi consolelogfalse true value false true value consolelogNaN true value NaN true value consolelog true value true value consolelognull true value null true value consolelogundefined true value undefined true value promise PromiseallSettled Promiseresolveok Promiserejectfail new Promiseresolve reject setTimeoutreject 100 foo thenres consolelogres "},{"title":"js中的this总结","tags":["js"],"href":"blog/js/js中的this总结","content":"jsthis Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery 7this 1 thisglobal javascript consolelogthis window true 2 functionstrict global javascript function f return this consolelogf window true 3 functionstrictthisundefined javascript use strict function f return this consolelogf undefined 4 this jsx const f this consolelogf window true const obj foo function const baz this return baz bar this consolelogobjfoo foo bar consolelogobjbar window true 5 this jsx const obj f function return this const myObj Objectcreateobj myObjfoo 1 consolelogmyObjf foo 1 6 this jsx class C constructor thisx 10 const obj new C consolelogobjx 10 7 this jsx const el documentgetElementByIdmyel eladdEventListenerclick function consolelogthis el true Binding functionprototypebindbind jsx function f return thisfoo var x fbindfoo hello consolelogx hello Functionprototypecall Functionprototypeapply this jsx function f return thisfoo consolelogfcallfoo hi hi "},{"title":"js中的数字分隔符","tags":["语法"],"href":"blog/js/js中的数字分隔符","content":" javascript const msInOneYear 31536000000 const price 4200 const msInOneYear 31536000000 3 const price 4200 42 "},{"title":"js基础问题","tags":["基础"],"href":"blog/js/js基础","content":"js thispromise varundefined let const javascript function sayHi consolelogname consolelogage var name Lydia let age 21 sayHi undefined and ReferenceError setTimeout varvar1 letconst i javascript for var i 0 i consolelogi 1 3 3 3 use strict javascript function getAge use strict age 21 consolelogage getAge ReferenceError javascript let name Lydia function getName consolelogname let name Sarah getName ReferenceError catch xy catchxerror javascript let x y try throw new Error catch x x 1 y 2 consolelogx consolelogx consolelogy 1 undefined 2 perimeter thiswindow javascript const shape radius 10 diameter return thisradius 2 perimeter 2 MathPI thisradius consolelogshapediameter consolelogshapeperimeter 20 and NaN javascript true Lydia 1 and false 1 2 12 3 4 5 75 object keystring javascript object object Object undefined undefined null null javascript const a const b key b const c key c ab 123 ac 456 consolelogab456 javascript let c greeting Hey let d d c cgreeting Hello consolelogdgreeting javascript let number 0 consolelognumber 0 consolelognumber 2 consolelognumber 2 new Number javascript new Number3 3 false typeof new Number3 object typeof 3 number class javascript class Chameleon static colorChangenewColor thisnewColor newColor return thisnewColor constructor newColor green thisnewColor newColor const freddie new Chameleon newColor purple consolelogfreddiecolorChangeorange TypeError class prototype javascript class Dog constructorname thisname name Dogprototypebark function consolelogWoof I am thisname const pet new DogMara petbark delete Dogprototypebark petbark ES2020 javascript class Counter number 10 increment thisnumber getNum return thisnumber const counter new Counter counterincrement SyntaxError consolelogcounternumber superthis javascript class Dog constructorname thisname name class Labrador extends Dog constructorname size supername thissize size superfather javascript class Bird constructor consolelogIm a bird class Flamingo extends Bird constructor consolelogIm pink super const pet new Flamingo function javascript function bark consolelogWoof barkanimal dog new javascript function PersonfirstName lastName thisfirstName firstName thislastName lastName const member new PersonLydia Hallie PersongetFullName function return thisfirstName thislastName this windows consolelogPersongetFullName undefined undefined thismember consolelogPersongetFullNamebindmember Lydia Hallie consolelogmembergetFullName TypeError PersonprototypegetFullName function return thisfirstName thislastName consolelogmembergetFullName Lydia Hallie new prototypes consoleinfomemberprototype undefined consoleinfoPersonprototype getFullName constructor PersonfirstName lastName javascript StringprototypegiveLydiaPizza return Just give Lydia pizza already const name Lydia namegiveLydiaPizza function prototype javascript function giveLydiaPizza return Here is pizza const giveLydiaChocolate Heres chocolate now go hit the gym already consoleloggiveLydiaPizzaprototype consoleloggiveLydiaChocolateprototype constructor undefined prototype bind call javascript const person name Lydia function sayHiage return thisname is age consolelogsayHicallperson 21 consolelogsayHibindperson 21 javascript function getPersonInfoone two three consolelogone consolelogtwo consolelogthree const person Lydia const age 21 getPersonInfoperson is age years old is years old Lydia 21 javascript consolelogx xI love to program I love to program eval Content Security Policy directive scriptsrc xxx javascript const sum eval10105 105 storage javascript sessionStoragesetItemcoolsecret 123 tab object key javascript const obj 1 a 2 b 3 c const set new Set1 2 3 4 5 objhasOwnProperty1 objhasOwnProperty1 sethas1 sethas1 true true false true function globalthis keyword Boolean javascript new Booleanfalse consolelog1 consolelog2 1 array javascript const list 1 2 1 2 1 2 consoleloglist 3 2 05 reduce javascript 0 1 2 3reduce acc cur return accconcatcur 1 2 1 2 0 1 2 3 push arraypush setInterval setIntervalsetTimeoutid number javascript setInterval consolelogHi 1000 169 clearInterval169 Interval javascript setTimeoutconsolelog 100 two two generator javascript function generatori yield i yield i 2 const gen generator10 consoleloggennextvalue consoleloggennextvalue 10 20 person members0 name Lydia personnull member javascript let person name Lydia const members person person null consolelogmembers name Lydia Objectassign javascript const user email emailcom password 12345 const updateUser email password if email Objectassignuser email if password userpassword password return user const updatedUser updateUser email newemailcom consolelogupdatedUser user true Objectsealassign javascript const myLifeSummedUp for let item in myLifeSummedUp consolelogitem for let item of myLifeSummedUp consolelogitem 0 1 2 3 and set javascript const set new Set1 1 2 3 4 consolelogset 1 2 3 4 es6 myCountermyCounter javascript counterjs let counter 10 export default counter indexjs import myCounter from counter myCounter 1 consolelogmyCounter Error javascript indexjs consolelogrunning indexjs import sum from sumjs consolelogsum1 2 sumjs consolelogrunning sumjs export const sum a b a b export javascript modulejs export default Hello world export const name Lydia indexjs import as data from module consolelogdata default function default name Lydia sumdefault4 javascript export default function sumx return x x indexjs import as sum from sum sumdefault4 delete javascript const name Lydia age 21 consolelogdelete name false consolelogdelete age true JSONstringify javascript const settings username lydiahallie level 19 health 90 const data JSONstringifysettings level health consolelogdata level19 health90 promise async asyncpromise pending Promiseresolve datathenresconsolelogres javascript async function getData return await PromiseresolveI made it const data getData consolelogdata Promise consoleinfodatathenitem consoleinfoitem consolelogdata I made it Promise I made it promise javascript TODO promise pure function symbol symbolfreeze javascript const info Symbola b consoleloginfo consolelogObjectkeysinfo javascript const add x x x function myFuncnum 2 value addnum consolelognum value myFunc myFunc3 Object iterable javascript const person name Lydia Hallie age 21 generatorvalue next Symboliterator yield Objectvaluesthis consolelogperson ObjectfromEntries array object javascript ObjectfromEntrieskey1 v1 key3 v2 key1 v1 key3 v2 if typeof randomValue number number false false string false javascript let randomValue name Lydia randomValue 23 if typeof randomValue string consolelogIts not a string else consolelogYay its a string "},{"title":"js异步编程","tags":["js","异步"],"href":"blog/js/js的异步编程","content":"Js web 1web workers web workers DOMhttpsdevelopermozillaorgzhCNdocsGlossaryDOM workerUI JS executes all operations on a single thread but using a few smart data structures it gives us the illusion of multithreading JavaScript main thread callstack JavaScript Event Loop JavaScript queue task Js Event Table Event Table Event Queue Event Queue js btnaddEventListenerclick function promise promise promise Timeouts and intervals setTimeout setInterval requestAnimationFrame setInterval setTimeout Generator GeneratorprototypenexthttpsdevelopermozillaorgenUSdocsWebJavaScriptReferenceGlobalObjectsGeneratornext GeneratorprototypereturnhttpsdevelopermozillaorgenUSdocsWebJavaScriptReferenceGlobalObjectsGeneratorreturn GeneratorprototypethrowhttpsdevelopermozillaorgenUSdocsWebJavaScriptReferenceGlobalObjectsGeneratorthrow AsyncAwait macrotaskjsmicrotask js 1 setTimeOut 2 setInterval 3 setImmediatenode 4 IO 5 6 UI 1 Promise 2 processnextTicknodejs 3 Objectobserve js node"},{"title":"JS module 不同引入方式/暴露方式的区别","tags":["js"],"href":"blog/js/module","content":"AMDUMDCommonJSES6 AMD one of the most ancient module systems initially implemented by the library requirejs UMD one more module system suggested as a universal one compatible with AMD and CommonJS CommonJS the module system created for Nodejs server HTML Modules work only via HTTPs not locally html import sayHi from sayjs documentbodyinnerHTML sayHiJohn ES6 js export sayHi from sayjs sayHi export default as User from userjs default js let hi bye await importsayjs hi bye javascript import sub2Var from subsub2 webpack treeshaking import sub1Var from module1 import module1 from module1 TS filename animalts typescript export type Cat breed string yearOfBirth number export interface Dog breeds string yearOfBirth number filename appts typescript import Cat Dog from animaljs type Animals Cat Dog CommonJS moduleexports require js consolelogmodule output id srcmodule1js exports Object globals undefined hot Object AMD REPOhttpsgithubcomrequirejsrequirejs"},{"title":"使用resumable实现分片上传、暂停续传","tags":["功能"],"href":"blog/js/分片上传","content":"react node resumable youtube httpsgithubcomviisionaryresumableClient 1 2 3 4 5 6 tablocal storage 1 1 get 2 post 3 4 5 delete chunks ts const contactChunks async resumableTotalChunks resumableIdentifier resumableFilename any let i 1 try while i parseIntresumableTotalChunks consoleinfoi await accesspublicmediairesumableIdentifierresumableFilename constantsROK constantsWOK const data await readFilepublicmediairesumableIdentifierresumableFilename await appendFilepublicmediaresumableFilename data await rmpublicmediairesumableIdentifierresumableFilename i catch e consoleinfoe finally ts Controllerupload export class UploadController Getresumable async startResumableRes res Res QueryParamsresumableIdentifier resumableIdentifier string QueryParamsresumableFilename resumableFilename string QueryParamsresumableChunkNumber resumableChunkNumber string QueryParamsresumableTotalChunks resumableTotalChunks string Promise try const hasTotalFile await accesspublicmediaresumableFilename constantsROK constantsWOKthen truecatch false if hasTotalFile return mediaresumableFilename await accesspublicmediaresumableChunkNumberresumableIdentifierresumableFilename constantsROK constantsWOK return resumableChunkNumber catch e thrownew PaymentRequiredNot Found ts Controllerupload export class UploadController Postresumable async resumable QueryParamsresumableChunkNumber resumableChunkNumber string QueryParamsresumableIdentifier resumableIdentifier string QueryParamsresumableFilename resumableFilename string QueryParamsresumableTotalChunks resumableTotalChunks string MultipartFilefile Required files ExpressMulterFile Promise const currentChunk publicmediaresumableChunkNumberresumableIdentifierresumableFilename await outputFilecurrentChunk files0buffer if resumableTotalChunks resumableChunkNumber await contactChunksresumableTotalChunks resumableIdentifier resumableChunkNumber resumableFilename return mediaresumableFilename return resumableChunkNumber codesandbox "},null,{"title":"如何让一组异步操作顺序执行？","tags":["js"],"href":"blog/js/如何让一组异步操作顺序执行？","content":" for await js const exec utilpromisifyrequirechildprocessexec let tasks lsecho hello for await let apiKey of tasks consolecountAPI const stdout stderr await execapiKeycmd "},{"title":"小记","tags":["js"],"href":"blog/js/小记","content":" onbeforeunload javascript windowaddEventListenerbeforeunload e let changeSymbol false ifchangeSymbol return ereturnValue return null return true "},{"title":"JS正则相关","tags":["js"],"href":"blog/js/正则","content":"Regular Expressions Cheat Sheet function adsf Regular Expressions Cheat Sheet Anchors start of the string or the start of a line in a multiline pattern end of the string or the end of a line in a multiline pattern b word boundary B not word boundary opposite of b Note Anchors are nonquantifiable ie cannot be followed by a quantifier Character sequences any character except line breaks w any word character W any nonword character opposite of w s any whitespace character S any nonwhitespace character opposite of s d any digit character D any nondigit character opposite of d abc a single character in the given set here a b or c abc a single character not in the given set opposite of abc az a single character in the given range here between a and z inclusive az a single character not in the given range opposite of az azAZ a single character in either of the given ranges Note Use to escape special characters eg etc Quantifiers a zero or one of a equal to a01 a zero or more of a equal to a0 a one or more of a equal to a1 a3 exactly 3 of a a3 3 or more of a a35 between 3 and 5 of a inclusive Note a is any valid quantifiable expression Groups ab match and capture everything enclosed here exactly ab ab match and capture either one character here a or b ab match everything enclosed without capturing Flags g Global m Multiline i Case insensitive u Unicode"},{"title":"code spilt show","href":"blog/md/Markdown","content":" Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery git codepen w h y"},{"title":"Markdown Syntax Guide","href":"blog/md/markdown-syntax","content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files also it shows whether basic HTML elements are decorated with CSS in a Hugo theme Headings The following HTML elements represent six levels of section headings is the highest section level while is the lowest H1 H2 H3 H4 H5 H6 Paragraph Xerum quo qui aut unt expliquam qui dolut labo Aque venitatiusda cum voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur offic to cor sequas etum rerum idem sintibus eiur Quianimin porecus evelectur cum que nis nust voloribus ratem aut omnimi sitatur Quiatem Nam omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus sin conecerem erum fuga Ri oditatquam ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat Itatur Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum core et que aut hariosam ex eat Blockquotes The blockquote element represents content that is quoted from another source optionally with a citation which must be within a footer or cite element and optionally with inline changes such as annotations and abbreviations Blockquote without attribution Tiam ad mint andaepu dandae nostion secatur sequo quae Note that you can use Markdown syntax within a blockquote Blockquote with attribution Dont communicate by sharing memory share memory by communicating Rob Pike1 1 The above quote is excerpted from Rob Pikes talkhttpswwwyoutubecomwatchvPAAkCSZUG1c during Gopherfest November 18 2015 Tables Tables arent part of the core Markdown spec but Hugo supports supports them outofthebox Name Age "},{"title":"Math Typesetting","href":"blog/md/math-typesetting","content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries In this example we will be using KaTeXhttpskatexorg Create a partial under layoutspartialsmathhtml Within this partial reference the Autorender Extensionhttpskatexorgdocsautorenderhtml or host these scripts locally Include the partial in your templates like so bash if or Paramsmath SiteParamsmath partial mathhtml end To enable KaTex globally set the parameter math to true in a projects configuration To enable KaTex on a per page basis include the parameter math true in content files Note Use the online reference of Supported TeX Functionshttpskatexorgdocssupportedhtml if or PageParamsmath SiteParamsmath end Examples Inline math varphi dfrac1sqrt52 16180339887 Block math varphi 1frac1 1frac1 1frac1 1cdots "},{"title":"Rich Content","href":"blog/md/rich-content","content":"Hugo ships with several Builtin Shortcodeshttpsgohugoiocontentmanagementshortcodesusehugosbuiltinshortcodes for rich content along with a Privacy Confighttpsgohugoioabouthugoandgdpr and a set of Simple Shortcodes that enable static and noJS versions of various social media embeds YouTube Privacy Enhanced Shortcode "},{"title":"aliplayer 源码阅读笔记","href":"blog/media/aliplayer","content":" MP4FLVM3U8RTMP WebSDKFlashH5 "},null,{"title":"媒体服务器 【node】 ffmpeg","tags":["node","web media"],"href":"blog/media/media-server","content":" shell brew install ffmpeg ffmpeg i inputmp4 outputavi obs rtmp flv hls h265 httplocalhost8000adminstreams RTMP rtmplocalhostliveSTREAMNAME httpflv httplocalhost8000liveSTREAMNAMEflv websocketflv wslocalhost8000liveSTREAMNAMEflv HLS httplocalhost8000liveSTREAMNAMEindexm3u8 DASH httplocalhost8000liveSTREAMNAMEindexmpd"},null,{"title":"todo","tags":["todo"],"href":"blog/media/todo","content":" Todo 3 SFUMCU 4 5 RTPRTCPsvc"},{"title":"WebRTC","tags":["WebRTC","webMedia"],"href":"blog/media/web-rtc","content":"WebRTC chromechrome 72chrome 7272 Firefox stun typescript export const iceServers url stunstunlgooglecom19302 url stunstunvoipbustercom url stunstunvoipstuntcom url stunstuneu3cxcom3478 code websocket call call typescript import Peer from peerjs import React useEffect useRef from react const peer useRefnull const ws useRefnull navigatormediaDevices navigatormediaDevices getUserMedia video true audio true thenstream MediaStream TODO VIDEO ws wscurrentemitjoinroom roomId myUserId wscurrentonuserlist list any setBeforeUserVideoslist wscurrentonuserconnected userId string ws peer call const call peercurrentcalluserId stream call callonstream remoteStream any TODO call callonclose TODO wscurrentonuserdisconnected userId string const peerConfig any id myUserId config iceServers peercurrent new PeermyUserId peerConfig peercurrentoncall call any callonstream function remoteStream any TODO new video callonclose TODO rm video call id stun turn ice nat TODO RTC RTCPeerConnection js js const pc new RTCPeerConnection const offerOptions offerToReceiveVideo 1 offerToReceiveAudio 1 await pccreateOfferofferOptions var localDesc new RTCSessionDescriptiontype offer sdp offerSdp await pcsetLocalDescriptionlocalDesc var remoteDesc new RTCSessionDescriptiontype answer sdp channelsdp await pcsetRemoteDescriptionremoteDesc Peer function gotRemoteStreame let track estreams0getTracks if track0kind video remoteVideoStream estreams0 else remoteAudioStream estreams0 pcaddEventListenertrack gotRemoteStream pconconnectionstatechange function event pconiceconnectionstatechange function event SDP UDP NAT ICE webRTC ICE NAT TURN STUN STUN NAT UDP TURN stun TURN sdp candidate TURN "},{"title":"各种直播流协议详解","tags":["livestream","web media"],"href":"blog/media/视频播放器","content":" hls safarih5hlsm3u8 chrome Safarim3u8 H264H265AAC flvhlsh264h265 "},{"title":"BLOG mind map","href":"blog/mindmap_png","content":"blog TODO imagepngassets1645103285802imagepng"},{"title":"如何使用Whistle抓包","tags":["network"],"href":"blog/network/Whistle","content":"NodewebWindowsFiddlerHTTPHTTPSWebsocketHTTP Whistle whistlehttpswproxyorgwhistle whistle shell npm install g whistle Chrome SwitchyOmega blognetworkimageUntitledpng blognetworkimageUntitled1png reqMerge reqMergehttpwproxyorgwhistlerulesreqMergehtml JSONContentType applicationjson jsx wwwtestcomcgibingetdata reqMergea1b2 w2 run"},{"title":"HTTP/2相关内容","tags":["network"],"href":"blog/network/http2","content":" HTTP2 1 Chrome617 HTTP2 HTTP HTTP2 NGINX SSL shell sudo openssl req x509 nodes days 365 newkey rsa2048 keyout etcsslprivatenginxselfsignedkey out etcsslcertsnginxselfsignedcrt http2 shell listen 443 ssl http2 ipv6onlyon listen 443 ssl http2 "},{"title":"https相关内容","tags":["network"],"href":"blog/network/https","content":"https imgpngblognetworkimgpng img3pngblognetworkimg3png img1pngblognetworkimg1png img2pngblognetworkimg2png https httpswwwyouzancom TLS Certificate Data Signature CA Data X509v3 CA RSAsha256Data IssuerPrivateKey DNDistinguished Name Not Before Not After DN 2048bit1024bit SAN X509v3 Subject Alternative Name Signature sha256WithRSAEncryption Data RSA Private Key Issuer Issuer CA CA CA CA Signature RSAsha256Data IssuerPrivateKey Certificate Chain sitecom sitecom GlobalSign Organization Validation CA SHA256 G2GlobalSign Root CA ManIntheMiddleAttack 1 Hash Hash H1 2 CA CA Certificate Signature Hash H2 3 H1 H2 truststorepublic trust storepublickeystoreprivatetruststorepublickeystoreprivate https Https https 1 2 CA em 3 4 https HTTPS https https img4pngcontentblognetworkimg4pnglognetworkimg4png HTTP2 HTTP2http2 HTTP 11 This allows developers to decide which page resources will load first every time In HTTP2 when a clienthttpswwwcloudflarecomlearningserverlessglossaryclientsidevsserverside makes a request for a webpage the server sends several streams of data to the client at once instead of sending one thing after another HTTP2 httpsdevelopersgooglecomwebfundamentalsperformancehttp2imagesbinaryframinglayer01svg Http2 nodejs"},null,{"title":"一些 npm上的工具 - serve","tags":["npm"],"href":"blog/npm/npm_package","content":"serve httpswwwnpmjscompackageserve NGINX build serve ok"},{"title":"package-lock.json的作用","tags":["npm"],"href":"blog/npm/npm相关","content":" npm nodemodulespackagejson 1 2 nodemodules 3 5 npm npm v7 packagejson npm ci npm ci npm ci packagejson nodemodules nodemodules npm install 2x10x npm install packagelockjson packagejson npm ci 1 packagejson json depA 100 2 npm install packagelockjson json depA 100 3 depAdepA110 shell npm ci respects only packagelockjson and installs 100 npm install also respects the packagelock version and keeps 100 installed ie when packagelockjson exists it overrules packagejson 4 packagejson json depA 110 5 shell npm ci will try to honor packagelock which says 100 but that does not satisfy packagejson requirement of 110 so it would throw an error npm install installs 110 as required by the updated packagejson also rewrites packagelockjson version to 110 ie when packagejson is modified it overrules the packagelockjson npm run changelog CHANGELOGmd "},{"title":"peerDependencies","tags":["npm"],"href":"blog/npm/peerDependencies","content":" httpsnodejsorgesblognpmpeerdependencies peerDependencies shell request2120 someotherlibrary123 request199 json dependencies winston 062 winstonmail 023 shell winston062 winstonmail023 winston0511 How do I build a reusable component to fit with different use cases How do I build a component with a simple API making it easy to use How do I build an extensible component in terms of UI and functionality"},{"title":"使用npm上发布自己的包","tags":["npm"],"href":"blog/npm/publishedNPMPackge","content":"npm Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery npm usrlocallibnodemodules npm npmhttpswwwnpmjscom bash npm adduser Username yourusername Password Email this IS public youremail Logged in as yourusername on httpsregistrynpmjsorg bash npm publish npm publish accesspublic Add README Add some keywords on packagejson Git bash npm version patch template internaldisqushtml "},null,null,{"title":"新版本的@babel register & 编译相关","tags":["前端安全"],"href":"blog/others/新版本的@babel register & 编译相关","content":"babel babelregister 20217 Babel Babel httpswwwbabeljscndocs "},{"title":"awesomeString","href":"blog/others/翻译软件","content":"awesomeString snack app "},{"title":"关于参数校验 JavaScript","href":"blog/project/关于参数校验","content":" ajv 96 Joi 689k yup 14k ts import array object string from yup const SpecialCharactersReg sS const uploadFormValidationSchema object filePostscript stringmax200 200trim labelList arraymax2 2 files arraymax5min1 fileName stringmax20 20matchesSpecialCharactersReg dataTimePickers date minmomentadd5 minuteformatyyyyMMDD HHmm maxmomentadd2 dayformatyyyyMMDD HHmm 2 "},{"title":"前端工程化","href":"blog/project/前端工程化","content":" JS Webpack Babelchunk SystemBabel css CSS Modules CSS in JS CSSJSCSS loadervueloader Webpack dest webpacksrc config HTMLCSSJS 1 "},{"title":"NodeJs事件循环","href":"blog/qa/NodeJs事件循环","content":" Nodejs IO 1 setTimeout setInterval 2 IO 3 idle prepare 4 IO IO setImmediate node 5 setImmediate 6 socketonclose blogjsjs"},{"title":"js 语法相关的问题","tags":["js"],"href":"blog/qa/js_grammar_QA","content":"jsgrammarQAmd "},{"title":"js的并发模型与事件循环","tags":["js"],"href":"blog/qa/js的并发模型与事件循环","content":" imgpngimgpng stack javascript function foob let a 10 return a b 11 function barx let y 3 return foox y consolelogbar7 returns 42 When calling bar a first frame is created containing bars arguments and local variables When bar calls foo a second frame is created and pushed on top of the first one containing foos arguments and local variables When foo returns the top frame element is popped out of the stack leaving only bars call frame When bar returns the stack is empty Heap Objects are allocated in a heap which is just a name to denote a large mostly unstructured region of memory Queue JavaScript Event loop"},{"title":"前端面试q&a","tags":["qa"],"href":"blog/qa/qa","content":" JS CookieCookie 1 https http 2 3 javascript Access Control Allow Origin acom Access Control Allow Credentials true xhr new XMLHttpRequest xhrwithCredentials true xhropenGET url xhrsend reactnativejs WebWorker chrome tabGUIJS js js 0 webpackhttpgzipgzip gzip gzipnginx GZIP19 1 9 100wt1100wt2t3 t2 t1 t3t4t370 t4t5t470 reactdiffdiff reactfiber ESES73ES8 ES2020 1 trimStarttrimEnd 2 ObjectentriesObjectfromEntries 3 4 flat 5 flatMap httpshttps RSA HTTPS httpswwwsitecom TLS httpshttps httplocalhost1313blognetworkhttps http2 http2blognetworkhttp2 http 10 ES6 Modules CommonJS CommonJS ES6 ObjectdefineProperty ObjectdefinePropertyobj prop descriptor configurable configurable true false enumerable enumerable true false value JavaScript undefined writable writable true value enUS false ObjectdefineProperty ES6 Proxy 33 ES6 SymbolMapDecorator API TypeScript TypeScript TypeScript JavaScript JavaScript TypeScript JavaScript TypeScript JavaScript 1 TypeScript TypeScript JavaScript 2 3 IDE 35 TypeScript const readonly 1 const readonly readonly 2 const readonly 3 const readonly constreadonly 1 type in interface ts type Keys firstname surname type DudeType key in Keys string const test DudeType firstname Pawel surname Grzybek 2 class implements TypeScript any TypeScript anyneverunknown void any typescript ts void void any undefined C unknown unknown typescript 30 JSONparse any any any any 3 never never ts interface Foo type foo interface Bar type bar union type type All Foo Bar function handleValueval All switch valtype case foo val Foo break case bar val Bar break default val never const exhaustiveCheck never val break All type All Foo Bar Baz handleValue Baz default branch val Baz never handleValue exhaust All TypeScript interface Function Array ClassIndexable interface JavaScript ts interface Say name string viod let say Say name string viod Array interface NumberArray index number number let fibonacci NumberArray 1 1 2 3 5 Class interface PersonalIntl name string sayHiname string string TypeScript StringNumberBooleanSymbolObject ts let name string bob let decLiteral number 6 let isDone boolean false let sym symbol Symbol interface Person name string age number TypeScript this JavaScript this TypeScriptnoImplicitThis true this this TypeScript Unions ts function getLengthsomething string number number return somethinglength indexts222 error TS2339 Property length does not exist on type string number Property length does not exist on type number function getStringsomething string number string return somethingtoString TypeScript 1 ab 2 nullundefined false0 3 typescript as let a undefined a 1 xxxxx let b number a aidenullundefined 4 100000000 100000000 5 32 9 TypeScript Predefined conditional types Exclude T U Extract T U NonNullable T null undefined ReturnType InstanceType TypeScript TypeScript TComp CovariantCompT DogAnimalArrayArray ContravariantCompT BivariantCompT InvariantComp T ts interface SuperType base string interface SubType extends SuperType addition string ts Covariant type Covariant T let coSuperType Covariant let coSubType Covariant coSuperType coSubType ts Contravariant strictFunctionTypes true type Contravariant p T void let contraSuperType Contravariant function p let contraSubType Contravariant function p contraSubType contraSuperType ts Bivariant strictFunctionTypes false type Bivariant p T void let biSuperType Bivariant function p let biSubType Bivariant function p both are ok biSubType biSuperType biSuperType biSubType ts Invariant strictFunctionTypes true type Invariant a Covariant b Contravariant let inSuperType Invariant a coSuperType b contraSuperType let inSubType Invariant a coSubType b contraSubType both are not ok inSubType inSuperType inSuperType inSubType TypeScript 49 TypeScript interfacetypeenum 50 TypeScript interface interface class 51 TypeScript JavaScript npm React react hooks class state React useLayoutEffect useEffect useEffect useLayoutEffect useLayoutEffectuseEffect useLayoutEffectLayout jsBridge 4reactnativejs Vue React redux actionaction storestore action reducer reducer storereact reactstateabcdc javascript thisstatecd2e 3 thissetStatethisstate immutablejs state virtual dom diff immutableimmutableimmutable shouldComponentUpdate javascript var map1 ImmutablefromJSa 1 b 1 c b c d e 7 var map2 ImmutablefromJSa 1 b 1 c b c d e 7 Immutableismap1 map2 true getIn javascript const fromJS requireimmutable const nested fromJSa b c 3 4 5 const nested2 nestedmergeDeepa b d 6 Map a Map b Map c List 3 4 5 d 6 consolelognested2getIna b d 6 setIn javascript const setIn requireimmutable const original x y z 123 setInoriginal x y z 456 x y z 456 consolelogoriginal x y z 123 csrf xss React Hook hooks from useStateuseEffectclass componentstatecomponentDidMount 1 propsprops props 2 hooks 3 4 React Hook useState useEffect 60 React Hook useEffect 61 React useEffect 62 React Hook 63 React useState 64 React 85 Tree Shaking Npm 86Npm peerDependencies 87 Npm JavaScriptDecorator 88 Git Git Submodule Git Git Git gitmodules URL Git Commit git rebase i commit commit pick edit e wq commit git commit amend git rebase continue Git Commit 1commit git log prettyoneline 2commit commit git reset soft Git ignore commit 1 track commit git rm 2 gitignore 3 ignore git push remote Git Git Commit docsstylefixfeat Commit Github Issues issueissueid issue close issueid fix issueid Git Hook precommit preparecommitmsg commitmsg postcommit postcheckout prerebase "},{"title":"serverless","tags":["serverless","devOps"],"href":"blog/qa/serverless","content":" serverless serverless NODE "},{"title":"什么是JavaScript 内存泄漏","tags":["qa"],"href":"blog/qa/什么是JavaScript内存泄漏","content":" js 0 javascript const arr 1 2 3 4 consoleloghello world 1 2 3 4arr1arr arr1 2 3 4 Timeline Capture Memory stop ES6 WeakSet WeakMapWeak"},{"title":"Performance","href":"blog/qa/前端监控","content":"windowperformance FPFCP javascript const paint windowperformancegetEntriesByTypepaint const FP paint0startTime const FCP paint1startTime LCP javascript function getLCP new PerformanceObserverentryList observer let entries entryListgetEntries const lastEntry entriesentrieslength 1 observerdisconnect consolelogLCP lastEntryrenderTime lastEntryloadTime observeentryTypes largestcontentfulpaint listenerError javascript export function listenerError windowaddEventListenererror event if eventtargetlocalName consolelog event else consolelog event true 32"},{"title":"线程模型","href":"blog/qa/浏览器进程/线程模型","content":" tabtab tab GUIJS"},{"title":"Ahook","tags":["Ahook"],"href":"blog/react使用/Ahook","content":"Ahookmd httpsahooksjsorgzhCN useScroll"},{"title":"Hooks使用","tags":["react"],"href":"blog/react使用/Hooks","content":" Hook React 168 class state React Hook Hook javascript const getFriendInfo name callback callbackname isOnline true function useFriendStatusname const isOnline setIsOnline useStatenull function handleStatusChangestatus setIsOnlinestatusisOnline useEffect getFriendInfoname handleStatusChange return return isOnline function FriendStatus const isOnline useFriendStatusjoey if isOnline null return Loading return joey is isOnline Online Offline useLayoutEffect useEffect useLayoutEffect useEffect vs useLayoutEffect useRef javascript const UseRefExample const count setCount useState0 const btnRef useRefnull useEffect const onClick setCountcount 1 btnRefcurrentaddEventListenerclick onClick false return btnRefcurrentremoveEventListenerclick onClick false count return count click me function UseLayoutEffectExample const n setN useState0 const onClick setNi i 1 useEffect consoleloguseEffect useLayoutEffect consoleloguseLayoutEffect return n n Click useMemo memo useCallback useMemo renderrender useCallbackuseMemo useCallback useMemo useCallback useMemo javascript const Child memodata consolelogchild render return child dataname const UseMemoExample consolelogHook render const count setCount useState0 const name setName useStaterose const data useMemo return name name const data useCallback return name name return count setCountcount 1update count useContext themeContextProvider createContext useContext javascript const themeContext createContextnull const Child2 const theme setTheme useContextthemeContext return setThemetheme light dark light theme function UseThemeContext const theme setTheme useStatedark return theme useReducer useReducer javascript const initial n 0 const reducer state action if actiontype add return n staten actionnumber else if actiontype multi return n staten 2 else throw new Errorunknown type function UseReducerExample const state dispatch useReducerreducer initial const n state const onClick dispatchtype add number 1 const onClick2 dispatchtype add number 2 return n n 1 2 useState useEffect typescript const doSomthing async useEffect async await doSomthing "},{"title":"关于React 中的 受控组件 vs 不受控组件","tags":["react"],"href":"blog/react使用/control_component","content":" React input typescript ReactDOMrender mountNode ref DOM typescript thisinputcurrentvalue "},{"title":"免费数据库 - mongodb","tags":["db"],"href":"blog/react使用/free_online_db","content":"mongodbhttpscloudmongodbcom shell brew install mongosh comment visionary 0610mm"},{"title":"nextJs - node 部署生产环境","tags":["nextJs","SSR"],"href":"blog/react使用/nextjs node 部署生产环境","content":"nextjs node NODE node v16142 shell yarn install http101631328088 ADDRESShttp101631328088 yarn run build officialwebsite cp r pubilc nextstandalone cp r nextstatic nextstandalonenext cd next tar cvf codetar standalone tar xvf codetar cd standalone nohup node serverjs standalone shell rooteb63132rootstandalonetree L 1 a next nodemodules packagejson public serverjs 3 directories 2 files rooteb63132rootstandalonenexttree L 1 a BUILDID buildmanifestjson cache packagejson prerendermanifestjson reactloadablemanifestjson requiredserverfilesjson routesmanifestjson server static 3 directories 7 files "},{"title":"PureComponent 纯组件","tags":["react"],"href":"blog/react使用/pureComponent","content":"shouldComponentUpdateReactPureComponent re render Avoid Reconciliation js function shouldComponentUpdatenextProps nextState return true renderrender diff React DOM render shouldComponentUpdate ReactPureComponentshouldComponentUpdate props state propsstate propsthemecolor CounterButtonre render propscolor re render propscolor re render ReactComponent re render propscolor jsx class CounterButton extends ReactPureComponent constructorprops superprops thisstate count 1 render return thissetStatestate count statecount 1 Count thisstatecount propsthemecolor CounterButtonre render concatObjectassign"},{"title":"pureFunction","tags":["react"],"href":"blog/react使用/pureFunction","content":" "},{"title":"React 中不是很常用的 Api","href":"blog/react使用/react-api-all","content":"FragmentError BoundariescomponentDidCatchSuspensecreatePortal Fragment tsx itemterm itemdescription itemterm itemdescription Error BoundariescomponentDidCatchSuspense tsx import React Suspense from react import MyErrorBoundary from MyErrorBoundary const OtherComponent Reactlazy importOtherComponent const AnotherComponent Reactlazy importAnotherComponent const MyComponent Suspense fallbackLoading tsx class MyErrorBoundary extends ReactComponent constructorprops superprops thisstate hasError false static getDerivedStateFromErrorerror Update state so the next render will show the fallback UI return hasError true componentDidCatcherror errorInfo You can also log the error to an error reporting service logErrorToMyServiceerror errorInfo render if thisstatehasError You can render any custom fallback UI return Something went wrong return thispropschildren context component component ReactDOMcreatePortal overflow hiddenzindex childrendomNode jsx render React does not create a new div It renders the children into domNode domNode is any valid DOM node regardless of its location in the DOM return ReactDOMcreatePortal thispropschildren domNode "},{"title":"react 服务端渲染 & next.js使用","tags":["react","ssr"],"href":"blog/react使用/react-ssr","content":" HTML SEO SSR nextjs Nextjshttpsnextjsorg npx createnextapplatest typescript or yarn create nextapp typescript 1 function About return About export default About 2 getStaticProps 3 url getStaticPaths import Image from nextimage pages i18n locale props page axios baseURL render axios baseURL js configbaseURL isBrowser httpipport docker build image tag tag docker run docker log container SEO Sitemap nextjs httpsgithubcomiamvishnusankarnextsitemapreadme"},{"title":"redux & redux-thunk & redux-saga","href":"blog/react使用/redux","content":"StoreAction Reducer Action Reducer Action Store View "},{"title":"为什么要使用React.forwardRef","href":"blog/react使用/关于ref","content":" ReactforwardRef HOCrefref jsx function logPropsComponent class LogProps extends ReactComponent componentDidUpdateprevProps consolelogold props prevProps consolelognew props thisprops render const forwardedRef rest thisprops Assign the custom prop forwardedRef as a ref return Note the second param ref provided by ReactforwardRef We can pass it along to LogProps as a regular prop eg forwardedRef And it can then be attached to the Component return ReactforwardRefprops ref return "},{"title":"react 源码阅读 - Hooks","href":"blog/react源码笔记/Hooks","content":"hooks useState useReducer useEffect useContext useRef"},{"title":"react 一些不常用API的示例","href":"blog/react源码笔记/Portals","content":" "},{"title":"react 源码阅读 - diff 算法","href":"blog/react源码笔记/diff算法总结","content":" v1702 diff TODO debu gdemo testdiff 123 propschildrennext v1702 diff 1 diff DOMfiber renderfilter workInProgress Fiber 2 diff fiber 3 diff reconcile child fibers 4 diff 5 diff resultingFirstChild fiber TODO new children debug oldFiber debug objectnumberstring fiberDOM DOM DOM DOM key type DOM jsx old type key null childrendiv child new old type divdelection p new new old key old array old array new array 1 array img5pngassetsreactimg5png 2 old array new array img6pngassetsreactimg6png new array placement 3 new array old array img8pngassetsreactimg8png old arraydeletion 4 new array old array img9pngassetsreactimg9png old array key fiber node new array unique key fiber node index key prop state input key fiber node 0 0 0 1 1 0 index index props stateindex new array img10pngassetsreactimg10png hint1 img11pngassetsreactimg11png reactreconciler shell packagesreactreconcilersrcReactChildFibernewjs reactDOMjs reconcileSinglePortal ReactDOMcreatePortal reconcileSingleElement typescript dev function reconcileSingleElement returnFiber Fiber currentFirstChild Fiber null element ReactElement lanes Lanes Fiber const key elementkey let child currentFirstChild DOM while child null DOM key if childkey key keytype const elementType elementtype TODO ReactFragment if elementType REACTFRAGMENTTYPE0xeacb if childtag Fragment 7 deleteRemainingChildrenreturnFiber childsibling fiber const existing useFiberchild elementpropschildren existingreturn returnFiber return existing else type if childelementType elementType Lazy types enableLazyElements typeof elementType object elementType null elementTypetypeof REACTLAZYTYPE resolveLazyelementType childtype deleteRemainingChildrenreturnFiber childsibling const existing useFiberchild elementprops existingref coerceRefreturnFiber child element existingreturn returnFiber return existing keytypefiberfiber TODO ul li 3 ul p p type li deleteRemainingChildrenreturnFiber child else keyfiber deleteChildreturnFiber child filber if elementtype REACTFRAGMENTTYPE const created createFiberFromFragment elementpropschildren returnFibermode lanes elementkey createdreturn returnFiber return created else const created createFiberFromElementelement returnFibermode lanes createdref coerceRefreturnFiber currentFirstChild element createdreturn returnFiber return created typescript function reconcileChildrenArray returnFiber Fiber currentFirstChild Fiber null lanes Lanes newChildren Array Fiber null newChildrencurrent fiberFibersibling newChildren0fibernewChildren1fibersibling let resultingFirstChild Fiber null null let previousNewFiber Fiber null null let oldFiber currentFirstChild let lastPlacedIndex 0 let newIdx 0 let nextOldFiber null for oldFiber null newIdx newChildrenlength newIdx "},{"title":"react 源码阅读 - 调用栈分析","href":"blog/react源码笔记/react","content":" ReactDOMrender fixturespackagingbabelstandalonedevhtml html ReactDOMrender Hello World documentgetElementByIdcontainer ReactDOMrender render commit render imgpngimgpng img1pngassetsreactimg1png renderlegacyRenderSubtreeIntoContainer jsonelementschildren packagesreactdomsrcclientReactDOMLegacyjs root initial mount fiberRoot root unbatchedUpdates javascript unbatchedUpdates updateContainerchildren fiberRoot parentComponent callback Fiber context javascript function legacyRenderSubtreeIntoContainer parentComponent ReactComponent children ReactNodeList container Container forceHydrate boolean callback Function img2pngassetsreactimg2png tips 0 0 GUI JS JS JS"},{"title":"react & reactDOM API","href":"blog/react源码笔记/reactBasic","content":"react v1702 react React TopLevel API react reactdom React TopLevel API Components 1 ReactComponent javascript class Welcome extends ReactComponent render return Hello thispropsname javascript function Componentprops context updater thisprops props thiscontext context If a component has string refs we will assign a different object later thisrefs emptyObject We initialize the default updater but the real one gets injected by the renderer thisupdater updater ReactNoopUpdateQueue ComponentprototypeisReactComponent Component 1 isReactComponent 2 setState setState javascript thisupdaterenqueueSetStatethis partialState callback setState 3 forceUpdate setState shouldComponentUpdate componentWillUpdatecomponentDidUpdate javascript thisupdaterenqueueForceUpdatethis callback forceUpdate 2 ReactPureComponent 3 Reactmemo Creating React Elements createElement createFactory Transforming Elements cloneElement isValidElement ReactChildren Fragments ReactFragment Refs ReactcreateRef ReactforwardRef Suspense Reactlazy ReactSuspense Hooks 168 Basic Hooks useState useEffect useContext Additional Hooks useReducer useCallback useMemo useRef useImperativeHandle useLayoutEffect useDebugValue"},{"title":"react 源码阅读 - 流程","href":"blog/react源码笔记/react流程","content":"React16 scheduler v15 Reconciler react v18 Concurrent Mode reconciler renderer Fiber fiber Node 1 current 2 workInProgress div fiber div this is simple html span javascript ReactDOMrender this is simple html span documentgetElementByIdcontainer img4pngassetsreactimg4png render img13pngassetsreactimg13png img14pngassetsreactimg14png renderFiberRoot unbatchedUpdates unbatched batchedUpdates update"},{"title":"react 源码阅读 - 名词 & 数据结构","href":"blog/react源码笔记/react源码中的一些名词","content":""},{"title":"react 源码阅读 - show with code","href":"blog/react源码笔记/react结合实战","content":""},{"title":"react 源码阅读 - setState","href":"blog/react源码笔记/setState","content":"setState typescript ComponentprototypesetState function partialState callback thisupdaterenqueueSetStatethis partialState callback setState typescript function enqueueSetStateinst payload callback updatel updatepayload payload updateupdateQueue update enqueueUpdatefiber update lane scheduleUpdateOnFiberfiber lane eventTime "},null,{"title":"fakeWebsite","tags":["security"],"href":"blog/security/fakeWebsite","content":"fakeWebsitemd iframe Nginx "},{"title":"关于xss注入式攻击","tags":["前端安全"],"href":"blog/security/关于xss注入式攻击","content":"xss csrf token cookie Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery html html xss 1 hrefa herf dd 2 onError var img 3 const xss alertxss script const container documentquerySelectorcontainer innerHTML documentwritexss containerouterHTMLimg react dangerouslySetInnerHTML jsx react p dangerouslySetInnerHTML html p dangerouslySetInnerHTML html p dangerouslySetInnerHTML html validSpeVal assetssecurityUntitledpngassetssecurityUntitledpng xss jsx function validSpeValval return valreplaceg ampreplaceg gtreplaceg quot replaceg aposreplace g nbsp html documentwrite alert alertXSS html html element jsx function startTimerseconds seconds parseIntseconds 3 setTimeoutfunction windowconfirmTime is up windowhistoryback seconds 1000 3 startTimer3 alert1 startTimeralert1 jsx jsx windowlocationhrefhttpwwwbaiducom token cookie search input url encodeEntities assetssecurityUntitled201pngassetssecurityUntitled201png assetssecurityUntitled202pngassetssecurityUntitled202png assetssecurityUntitled203pngassetssecurityUntitled203png assetssecurityUntitled204pngassetssecurityUntitled204png assetssecurityUntitled205pngassetssecurityUntitled205png hacker hackercookie urlencode OK url innerHTMLdangerouslySetInnerHTML CSRFCrossSite Request Forgery CSRFRefererCSRF"},{"title":"浏览器的同源策略","tags":["前端安全"],"href":"blog/security/浏览器的同源策略","content":"origin https http localStorage IndexedDB JavaScript Cookies cookiepublic suffix Internet Explorer HTTPHTTPSsubdomains cookie cookie DomainPathSecure HttpOnly cookie https cookie Cookie javascript AccessControlAllowOrigin acom AccessControlAllowCredentials true xhr new XMLHttpRequest xhrwithCredentials true xhropenGET url xhrsend "},{"title":"seo支持 & 谷歌分析","href":"blog/seo/seo","content":" Search Consolehttpssearchgooglecomsearchconsoleresourceidscdomainvisionarytop searchconsole dnstxt httpsblogvisionarytopsitemapxml robotstxt text Useragent Allow Sitemap httpsblogvisionarytopsitemapxml sitemapxmlhugo"},{"title":"spider-tool","tags":["前端安全"],"href":"blog/spider/spider-tool","content":"xss csrf token cookie Crosssite request forgery WikipediahttpsenwikipediaorgwikiCrosssiterequestforgery bash Gruntfilejs READMEmd packagelockjson packagejson spiderutilspackagejson src copyToClipboardts dateRangeGeneratorts dayOfYearts deDuplicationByts debouncets flatts getURLParametersts getWeekStartAndEndts getWitchWeekts indexts nestts onClickOutsidets randomFillts renameKeysts sampleSizets throttlets test getWitchWeekspects tsconfigjson Gruntfilejs grunt tsBabel spiderutilspackagejsonpackage version spiderutilspackagejsoncp spiderutils src test ts spiderutils copyToClipboarddts copyToClipboardjs dateRangeGeneratordts dateRangeGeneratorjs dayOfYeardts dayOfYearjs deDuplicationBydts deDuplicationByjs debouncedts debouncejs flatdts flatjs getURLParametersdts getURLParametersjs getWeekStartAndEnddts getWeekStartAndEndjs getWitchWeekdts getWitchWeekjs indexdts indexjs nestdts nestjs onClickOutsidedts onClickOutsidejs packagejson randomFilldts randomFilljs renameKeysdts renameKeysjs sampleSizedts sampleSizejs throttledts throttlejs Github Actionnpm master push github Action githubworkflowsnpmpublishyml build bash npm install save spiderutils xxtsxxjs tsx import spiderUtils from spiderutils spiderUtilsthrottle import throttle from spiderutilsthrottle TODOsize npm GitHub Action Grunt Ts Babel"},{"title":"spider-vision","tags":["grunt","typescript","jest"],"href":"blog/spider/spider-vision","content":""},{"title":"spider 一系列的设计","href":"blog/spider/spider设计","content":" Project Desc "},{"title":"Css Reference Sheet","tags":["thumbnail"],"href":"blog/style/Css-Reference-Sheet","content":"css grid "},{"title":"REM","tags":["REM"],"href":"blog/style/REM","content":"REMmd "},{"title":"css属性总结","tags":["css属性总结"],"href":"blog/style/css属性总结","content":"cssmd "},{"title":"lessAPI","tags":["lessAPI"],"href":"blog/style/lessAPI","content":"lessAPImd "},{"title":"svg简述","tags":["svg简述"],"href":"blog/style/svg简述","content":"svgmd linearGradient id offset stopcolorstopopacitystopcolor html "},{"title":"TypeScript 基础类型","tags":["TypeScript"],"href":"blog/ts/TypeScriptBasic","content":"ts hand bookhttpswwwtypescriptlangorgdocshandbookintrohtml TypeScript Basic tsblogtstspng boolean bigint null number string symbol object and undefined 1 Type tsx type WindowStates open closed minimized type LockStates locked unlocked type OddNumbersUnderTen 1 3 5 7 9 2 Interfaces tsx object props interface User name string id number const user User name Hayes id 0 3 Classes tsx static class UserAccount name string id number static ownerstring constructorname string id number thisname name thisid id const user User new UserAccountMurphy 1 UserAccountownerstring ali 4 implements tsx 4 interface StringValidator isAcceptables string boolean class ZipCodeValidator implements StringValidator isAcceptables string return slength 5 numberRegexptests 5 enums tsx enum Color Red Green Blue let c Color ColorGreen enum UserResponse No 0 Yes 1 enum FileAccess constant members None Read 1 1 Write 1 2 ReadWrite Read Write computed member G 123length Union enums and enum member types tsx enum ShapeKind Circle Square interface Circle kind ShapeKindCircle radius number 6 function tsx function getAdminUser User function deleteUseruser User function getLengthobj string string return objlength let fst a T b U T a b a 1 Generics tsx type StringArray Array type NumberArray Array type ObjectWithNameArray Array type interface Backpack add obj Type void get Type function identityarg T T return arg let output identitymyString function loggingIdentityarg T T consolelogarglength return arg 2 Utility Types type transformations tsx Partial Readonly "},{"title":"React中常用的type","tags":["ts"],"href":"blog/ts/react中的type","content":"Reacttype tsx const handleChange event ReactChangeEvent setAgeeventtargetvalue as number "},{"title":"tsconfig.json 属性一览 & Module 对比","tags":["ts"],"href":"blog/ts/tsconfig","content":"build build json compilerOptions target es5 module CommonJS target es3 or es5 commonjs es6 esModuleInterop true declaration true declarationDir libtypes lib ts dom domiterable esnext include ts spects exclude nodemodules build json compilerOptions removeCommentstrue strict true allowJS true JSJSX esModuleInterop true exportimport from noFallthroughCasesInSwitch true switchbreak moduleResolution node tsnode noEmit true js Module import export 1 ECMAScript 2015 SimpleModulets tsx import m requiremod export let t msomething 1 CommonJS Node SimpleModulejs jsx var mod1 requiremod exportst mod1something 1 2 ECMAScript 5 CommonJS tsx filename indexts import valueOfPi from constants export const twoPi valueOfPi 2 jsx use strict ObjectdefinePropertyexports esModule value true exportstwoPi void 0 const constants1 requireconstants exportstwoPi constants1valueOfPi 2 ECMAScript 5 ESNext ES2020 ES6 tsx import valueOfPi from constants export const twoPi valueOfPi 2 "},{"title":"ts & tsx lib中一些常用的 type","tags":["ts"],"href":"blog/ts/用过的类型","content":" typescript thislistener e KeyboardEvent windowaddEventListenerkeyup thislistener InstanceType"},null,{"title":"MAC 上好用的快捷键","tags":["keymap"],"href":"blog/utils/macKaymap","content":"1 Press CTRLALTDelete to end the session command 2"},{"title":"zsh常用配置等","tags":["keymap"],"href":"blog/utils/zsh","content":" shell vi zshrc source zshrc alias vbvi zshrc alias sbsource zshrc alias nsnpm start alias nlnpm run lint alias nbnpm run build alias npnpm run deploy alias gczgit cz alias gagit add alias gsgit status alias gpgit push alias glgit pull alias gcgit clone alias gcdgit checkout dev alias gcmgit checkout master alias ninpm install "},{"title":"使用Hugo搭一个自己Blog","tags":["前端安全"],"href":"blog/utils/使用Hugo搭一个自己Blog","content":"Hugo gogo HTML md Quick Starthttpsgohugoiogettingstartedquickstart bash brew install hugo go gogo go bash git clone httpsgithubcomgohugoiohugogit cd hugo go install tags extended link link bash hugo new site quickstart cd quickstart git init git submodule add httpsgithubcomtheNewDynamicgohugothemeanankegit themesananke tip submodule pushGitHub bash hugo new postsmyfirstpostmd bash hugo server D configtoml bash theme ananke public bash hugo D GitHubio 1 quickstartremote 2 pages pages ghpages 3 Actionsworkflows git bloggithubworkflows workflows mainpush ghpages ghpagesyml bash name github pages on push branches main Set a branch to deploy pullrequest jobs deploy runson ubuntu2004 steps uses actionscheckoutv2 with submodules true Fetch Hugo themes true OR recursive fetchdepth 0 Fetch all history for GitInfo and Lastmod name Setup Hugo uses peaceirisactionshugov2 with hugoversion latest extended true name Build run hugo minify name Deploy uses peaceirisactionsghpagesv3 if githubref refsheadsmain with githubtoken secretsGITHUBTOKEN publishdir public domain DNScnamegithubiohttpgithubio GitHub page"},{"title":"各种工具合集","tags":["前端安全"],"href":"blog/utils/各种工具合集","content":" 1 brew install tree 2chocolatey httpschocolateyorg window brew shell SetExecutionPolicy Bypass Scope Process Force SystemNetServicePointManagerSecurityProtocol SystemNetServicePointManagerSecurityProtocol bor 3072 iex NewObject SystemNetWebClientDownloadStringhttpscommunitychocolateyorginstallps1 3 windows power shell httpsdocsmicrosoftcomzhcnpowershellscriptingwhatsnewmigratingfromwindowspowershell51topowershell7viewpowershell72"},null,{"title":"upload","href":"blog/web/upload","content":" youtube imgpngblogwebimgpng bilibili resumable file uploads httpsgithubcom23resumablejs httpsdevelopersgooglecomyoutubev3guidesusingresumableuploadprotocol httpsdevelopermozillaorgenUSdocsGlossaryPreflightrequest"},{"title":"js 代码规范 - clean code","href":"blog/代码规范/cleanCode","content":" tips ideaweb storm Translation snack 1 2 3 javascript const address One Infinite Loop Cupertino 95014 const cityZipCodeRegex ssd5 saveCityZipCode addressmatchcityZipCodeRegex1 addressmatchcityZipCodeRegex2 const address One Infinite Loop Cupertino 95014 const cityZipCodeRegex ssd5 const city zipCode addressmatchcityZipCodeRegex saveCityZipCodecity zipCode 4 5 function 1 context javascript Bad example function paintCarcar color carcarColor color carcolor 2 es6 3 function 4 function 5 6 7 ObjectAssign javascript good example const menuConfig title Order User did not include body key buttonText Send cancellable true function createMenuconfig let finalConfig Objectassign title Foo body Bar buttonText Baz cancellable true config return finalConfig config now equals title Order body Bar buttonText Send cancellable true createMenumenuConfig 8 javascript Bad function createFilename temp if temp fscreatetempname else fscreatename Good function createFilename fscreatename function createTempFilename createFiletempname 9 javascript Bad Global variable referenced by following function If we had another function that used this name now itd be an array and it could break it let name Ryan McDermott function splitIntoFirstAndLastName name namesplit splitIntoFirstAndLastName consolelogname Ryan McDermott Good function splitIntoFirstAndLastNamename return namesplit const name Ryan McDermott const newName splitIntoFirstAndLastNamename consolelogname Ryan McDermott 9 javascript Bad const addItemToCart cart item cartpush item date Datenow Good const addItemToCart cart item return cart item date Datenow 10 global javascript class SuperArray extends Array diffcomparisonArray const hash new SetcomparisonArray return thisfilterelem hashhaselem 11 switchgetSomethingobjsomething javascript function shouldShowSpinnerfsm listNode return fsmstate fetching isEmptylistNode if shouldShowSpinnerfsmInstance listNodeInstance 12 typeof val1 number 1 es6class 2 3 solid 1 SRP 2 OCP 3 LISKOVLSP 4 ISP 5 DIP class newclass new new promise error handling try catch"},{"title":"js 代码规范 - eslint属性","href":"blog/代码规范/eslint","content":""},{"title":"js 代码规范 - less规范","href":"blog/代码规范/less规范","content":""},{"title":"react 代码规范","href":"blog/代码规范/react规范","content":""},{"title":"js 代码规范 - sass规范","href":"blog/代码规范/sass规范","content":""}]